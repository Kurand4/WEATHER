//---------------------------------------------------------------------------

#include <vcl.h>

#pragma hdrstop

#include "MainUnit.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma link "IdBaseComponent"
#pragma link "IdComponent"
#pragma link "IdHTTP"
#pragma link "IdTCPClient"
#pragma link "IdTCPConnection"
#pragma link "IdBaseComponent"
#pragma link "IdComponent"
#pragma link "IdHTTP"
#pragma link "IdTCPClient"
#pragma link "IdTCPConnection"
#pragma resource "*.dfm"
TMainForm *MainForm;
//---------------------------------------------------------------------------
__fastcall TMainForm::TMainForm(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TMainForm::Button1Click(TObject *Sender)
{
    TIdHTTP *idHTTP = new TIdHTTP(NULL);
    idHTTP->Request->UserAgent = "Mozilla/5.0";
		String response;
		try {
				response = idHTTP->Get("http://api.openweathermap.org/data/2.5/weather?lat=60&lon=30&appid=111fc293274bd7a3201358adf50ce678");
				Memo1->Lines->Add(response);
				// Парсинг JSON ответа      f6d62ab1-48c6-4f67-8943-005f655630d9        X-Yandex-Weather-Key
		}
    __finally {
        delete idHTTP;
    }
}
//---------------------------------------------------------------------------
